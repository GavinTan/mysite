"use strict";(self.webpackChunkmysite=self.webpackChunkmysite||[]).push([[5703],{36385:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>a,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var s=o(11527),t=o(7502);const r={},i=void 0,d={id:"\u6570\u636e\u5e93/monodb",title:"monodb",description:"\u526f\u672c\u96c6\u96c6\u7fa4",source:"@site/docs/\u6570\u636e\u5e93/monodb.md",sourceDirName:"\u6570\u636e\u5e93",slug:"/\u6570\u636e\u5e93/monodb",permalink:"/docs/\u6570\u636e\u5e93/monodb",draft:!1,unlisted:!1,editUrl:"https://github.com/gavintan/notes/docs/\u6570\u636e\u5e93/monodb.md",tags:[],version:"current",frontMatter:{},sidebar:"doc",previous:{title:"\u96c6\u7fa4\u5347\u7ea7",permalink:"/docs/k8s/\u96c6\u7fa4\u5347\u7ea7"},next:{title:"rabbitmq\u4ecb\u7ecd",permalink:"/docs/\u6d88\u606f\u961f\u5217/rabbitmq"}},a={},l=[{value:"\u526f\u672c\u96c6\u96c6\u7fa4",id:"\u526f\u672c\u96c6\u96c6\u7fa4",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u914d\u7f6e\u96c6\u7fa4",id:"\u914d\u7f6e\u96c6\u7fa4",level:3},{value:"\u5206\u7247\u96c6\u7fa4",id:"\u5206\u7247\u96c6\u7fa4",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-1",level:3},{value:"1.\u521b\u5efa\u914d\u7f6e\u670d\u52a1\u5668\u526f\u672c\u96c6",id:"1\u521b\u5efa\u914d\u7f6e\u670d\u52a1\u5668\u526f\u672c\u96c6",level:3},{value:"2.\u521b\u5efa\u5206\u7247\u670d\u52a1\u5668\u526f\u672c\u96c6",id:"2\u521b\u5efa\u5206\u7247\u670d\u52a1\u5668\u526f\u672c\u96c6",level:3},{value:"3.\u90e8\u7f72\u67e5\u8be2\u8def\u7531\u5668mongos",id:"3\u90e8\u7f72\u67e5\u8be2\u8def\u7531\u5668mongos",level:3},{value:"\u6d4b\u8bd5\u6570\u636e",id:"\u6d4b\u8bd5\u6570\u636e",level:3},{value:"\u5747\u8861\u5668 blancer",id:"\u5747\u8861\u5668-blancer",level:3},{value:"\u5e38\u7528\u64cd\u4f5c",id:"\u5e38\u7528\u64cd\u4f5c",level:2}];function c(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"\u526f\u672c\u96c6\u96c6\u7fa4",children:"\u526f\u672c\u96c6\u96c6\u7fa4"}),"\n",(0,s.jsx)(e.p,{children:"\u5b9e\u73b0\u590d\u5236\u548c\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u7684 MongoDB \u670d\u52a1\u5668\u96c6\u7fa4\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel80-5.0.9.tgz\ntar zxf mongodb-linux-x86_64-rhel80-5.0.9.tgz\nmv mongodb-linux-x86_64-rhel80-5.0.9 /usr/local/mongodb\n\nuseradd -M -s /sbin/nologin mongod\nmkdir -p /data/mongodb /var/log/mongodb\nchown mongod. /data/mongodb /var/log/mongodb\n\ncat <<EOF > /etc/profile.d/mongodb.sh\nPATH=\\$PATH:/usr/local/mongodb/bin\nEOF\nsource /etc/profile.d/mongodb.sh\n\n#\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\ncat <<EOF > /etc/mongod.conf\nreplSet=mongodb-cluster-test\nport=27017\nbind_ip_all=true\ndbpath=/data/mongodb\nlogpath=/var/log/mongodb/mongod.log\nlogappend=true\nfork=true\npidfilepath=/var/run/mongodb/mongod.pid\ndirectoryperdb=true\nwiredTigerCollectionBlockCompressor=zstd\nEOF\n\n\n#\u521b\u5efasystemd\u914d\u7f6e\u6587\u4ef6\ncat <<EOF > /usr/lib/systemd/system/mongod.service\n[Unit]\nDescription=MongoDB Database Server\nDocumentation=https://docs.mongodb.org/manual\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nUser=mongod\nGroup=mongod\nRuntimeDirectory=mongodb\nEnvironment="OPTIONS=-f /etc/mongod.conf"\nExecStart=/usr/local/mongodb/bin/mongod \\$OPTIONS\nPIDFile=/var/run/mongodb/mongod.pid\nType=forking\n# file size\nLimitFSIZE=infinity\n# cpu timev\nLimitCPU=infinity\n# virtual memory size\nLimitAS=infinity\n# open files\nLimitNOFILE=64000\n# processes/threads\nLimitNPROC=64000\n# locked memory\nLimitMEMLOCK=infinity\n# total threads (user+kernel)\nTasksMax=infinity\nTasksAccounting=false\n# Recommended limits for mongod as specified in\n# https://docs.mongodb.com/manual/reference/ulimit/#recommended-ulimit-settings\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsystemctl daemon-reload\nsystemctl start mongod\n\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u914d\u7f6e\u96c6\u7fa4",children:"\u914d\u7f6e\u96c6\u7fa4"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'#mongo cli\n#\u521d\u59cb\u5316\nrs.initiate()\n\n#\u6dfb\u52a0\u8282\u70b9(\u6267\u884c\u7684\u5f53\u524d\u8282\u70b9\u5c06\u4e3a\u4e3b\u8282\u70b9\uff0c\u6dfb\u52a0\u7684\u4e3a\u526f\u672c\u8282\u70b9)\nrs.add("192.168.32.15:27017")\n\n#\u6dfb\u52a0\u4ef2\u88c1\u8282\u70b9(\u4e0d\u5b58\u6570\u636e\u53ea\u7528\u6765\u9009\u4e3e\u7528\uff0c\u5f53\u8d44\u6e90\u4e0d\u591f\u65f6\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u4ef2\u88c1\u8282\u70b9)\nrs.addArb("192.168.32.16:27017")\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u5206\u7247\u96c6\u7fa4",children:"\u5206\u7247\u96c6\u7fa4"}),"\n",(0,s.jsx)(e.p,{children:"\u5206\u7247\u96c6\u7fa4\u662f\u5206\u5e03\u5728\u8bb8\u591a\u5206\u7247\uff08\u670d\u52a1\u5668\uff09\u4e0a\u7684\u6570\u636e\u96c6\u7684\u96c6\u5408\uff0c\u4ee5\u5b9e\u73b0\u6c34\u5e73\u53ef\u6269\u5c55\u6027\u548c\u66f4\u597d\u7684\u8bfb\u5199\u64cd\u4f5c\u6027\u80fd\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u751f\u4ea7\u914d\u7f6e\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5c06\u914d\u7f6e\u670d\u52a1\u5668\u90e8\u7f72\u4e3a 3 \u6210\u5458",(0,s.jsx)(e.a,{href:"https://www.mongodb.com/docs/manual/reference/glossary/#std-term-replica-set",children:"\u526f\u672c\u96c6"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u5c06\u6bcf\u4e2a Shard \u90e8\u7f72\u4e3a 3 \u6210\u5458",(0,s.jsx)(e.a,{href:"https://www.mongodb.com/docs/manual/reference/glossary/#std-term-replica-set",children:"\u526f\u672c\u96c6"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u90e8\u7f72\u4e00\u4e2a\u6216\u591a\u4e2a",(0,s.jsx)(e.a,{href:"https://www.mongodb.com/docs/manual/reference/program/mongos/#mongodb-binary-bin.mongos",children:(0,s.jsx)(e.code,{children:"mongos"})}),"\u8def\u7531\u5668"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://blog.angelmsger.com/%E6%B7%B1%E5%85%A5MongoDB%E5%88%86%E7%89%87%E9%9B%86-%E5%9D%97%EF%BC%8C%E5%8C%BA%E5%92%8C%E5%9D%87%E8%A1%A1%E5%99%A8/",children:"\u67e5\u770b\u5206\u7247\u8be6\u89e3"})}),"\n",(0,s.jsx)(e.h3,{id:"\u5b89\u88c5-1",children:"\u5b89\u88c5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel80-5.0.9.tgz\ntar zxf mongodb-linux-x86_64-rhel80-5.0.9.tgz\nmv mongodb-linux-x86_64-rhel80-5.0.9 /usr/local/mongodb\n\nuseradd -M -s /sbin/nologin mongod\nmkdir -p /data/mongodb /var/log/mongodb\nchown mongod. /data/mongodb /var/log/mongodb\n\ncat <<EOF > /etc/profile.d/mongodb.sh\nPATH=\\$PATH:/usr/local/mongodb/bin\nEOF\nsource /etc/profile.d/mongodb.sh\n\n\n#\u521b\u5efasystemd\u914d\u7f6e\u6587\u4ef6\ncat <<EOF > /usr/lib/systemd/system/mongod.service\n[Unit]\nDescription=MongoDB Database Server\nDocumentation=https://docs.mongodb.org/manual\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nUser=mongod\nGroup=mongod\nRuntimeDirectory=mongodb\nEnvironment="OPTIONS=-f /etc/mongod.conf"\nExecStart=/usr/local/mongodb/bin/mongod \\$OPTIONS\nPIDFile=/var/run/mongodb/mongod.pid\nType=forking\n# file size\nLimitFSIZE=infinity\n# cpu timev\nLimitCPU=infinity\n# virtual memory size\nLimitAS=infinity\n# open files\nLimitNOFILE=64000\n# processes/threads\nLimitNPROC=64000\n# locked memory\nLimitMEMLOCK=infinity\n# total threads (user+kernel)\nTasksMax=infinity\nTasksAccounting=false\n# Recommended limits for mongod as specified in\n# https://docs.mongodb.com/manual/reference/ulimit/#recommended-ulimit-settings\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsystemctl daemon-reload\nsystemctl start mongod\n'})}),"\n",(0,s.jsx)(e.h3,{id:"1\u521b\u5efa\u914d\u7f6e\u670d\u52a1\u5668\u526f\u672c\u96c6",children:"1.\u521b\u5efa\u914d\u7f6e\u670d\u52a1\u5668\u526f\u672c\u96c6"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u5b89\u88c5\u53ca\u751f\u6210\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u5728\u6bcf\u4e2a\u914d\u7f6e\u670d\u52a1\u5668\u8282\u70b9\u6267\u884c"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u751f\u6210\u914d\u7f6e\u6587\u4ef6\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"cat <<EOF > /etc/mongod.conf\nreplSet=rs-config-test\nconfigsvr=true\nport=27019\nbind_ip_all=true\ndbpath=/data/mongodb\nlogpath=/var/log/mongod.log\nlogappend=true\nfork=true\npidfilepath=/var/run/mongodb/mongod.pid\ndirectoryperdb=true\nwiredTigerCollectionBlockCompressor=zstd\nEOF\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u521d\u59cb\u5316\u526f\u672c\u96c6\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# \u8fde\u63a5\u5176\u4e2d\u4e00\u4e2a\u8282\u70b9\uff0c_id\u4e0e\u914d\u7f6e\u6587\u4ef6replSet\u5bf9\u5e94\uff0c\u8282\u70b9\u4f7f\u7528\u4e3b\u673a\u540d\u52a0\u7aef\u53e3\uff08\u4e0d\u8981\u4f7f\u7528IP\uff09\nrs.initiate(\n  {\n    _id : "rs-config-test",\n    configsvr: true,\n    members: [\n      { _id : 0, host : "m1:27019" },\n      { _id : 1, host : "m2:27019" },\n      { _id : 2, host : "m3:27019" }\n    ]\n  }\n)\n'})}),"\n",(0,s.jsx)(e.h3,{id:"2\u521b\u5efa\u5206\u7247\u670d\u52a1\u5668\u526f\u672c\u96c6",children:"2.\u521b\u5efa\u5206\u7247\u670d\u52a1\u5668\u526f\u672c\u96c6"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u5b89\u88c5\u53ca\u751f\u6210\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u5728\u6bcf\u4e2a\u5206\u7247\u670d\u52a1\u5668\u8282\u70b9\u6267\u884c"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u751f\u6210\u914d\u7f6e\u6587\u4ef6\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"cat <<EOF > /etc/mongod.conf\nreplSet=rs-shard-test-1\nshardsvr=true\nport=27018\nbind_ip_all=true\ndbpath=/data/mongodb\nlogpath=/var/log/mongod.log\nlogappend=true\nfork=true\npidfilepath=/var/run/mongodb/mongod.pid\ndirectoryperdb=true\nwiredTigerCollectionBlockCompressor=zstd\nEOF\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u521d\u59cb\u5316\u526f\u672c\u96c6\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# \u8fde\u63a5\u5176\u4e2d\u4e00\u4e2a\u8282\u70b9\uff0c_id\u4e0e\u914d\u7f6e\u6587\u4ef6replSet\u5bf9\u5e94\uff0c\u8282\u70b9\u4f7f\u7528\u4e3b\u673a\u540d\u52a0\u7aef\u53e3\uff08\u4e0d\u8981\u4f7f\u7528IP\uff09\nrs.initiate(\n  {\n    _id : "rs-shard-test-1",\n    members: [\n      { _id : 0, host : "m1:27018" },\n      { _id : 1, host : "m2:27018" },\n      { _id : 2, host : "m3:27018" }\n    ]\n  }\n)\n'})}),"\n",(0,s.jsx)(e.h3,{id:"3\u90e8\u7f72\u67e5\u8be2\u8def\u7531\u5668mongos",children:"3.\u90e8\u7f72\u67e5\u8be2\u8def\u7531\u5668mongos"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u8fde\u63a5\u67e5\u8be2\u8def\u7531\u5668\uff0c\u4e3a\u9ad8\u53ef\u7528\u8d1f\u8f7d\u5747\u8861\u5e94\u90e8\u7f72\u591a\u4e2a"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u751f\u6210\u914d\u7f6e\u6587\u4ef6\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"cat <<EOF > /etc/mongod.conf\nport=27017\nbind_ip_all=true\nlogpath=/var/log/mongod.log\nlogappend=true\nfork=true\npidfilepath=/var/run/mongodb/mongod.pid\nEOF\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u6dfb\u52a0\u5206\u7247\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'sh.addShard("rs-shard-test-1/m1:27018,m2:27018,m3:27018")\nsh.addShard("rs-shard-test-2/m4:27018,m5:27018,m6:27018")\n\n#\u4e3a\u6570\u636e\u5e93\u542f\u7528\u5206\u7247\nsh.enableSharding("<database>")\n\n#\u96c6\u5408\u542f\u7528\u54c8\u5e0c\u5206\u7247\nsh.shardCollection("<database>.<collection>", {_id: "hashed"})\n\n#\u96c6\u5408\u542f\u7528\u9ed8\u8ba4\u8303\u56f4\u5206\u7247\uff08\u4f1a\u8fde\u7eed\u5199\u6ee1\u4e00\u4e2achunk\uff0864MB\uff09\uff0c\u624d\u4f1a\u81ea\u52a8\u5728\u5176\u4ed6\u5206\u7247\u4e0a\u521b\u5efa\u65b0chunk\uff09\nsh.shardCollection("<database>.<collection>", {_id: 1})\n\n\n#\u67e5\u770b\u6307\u5b9a\u96c6\u5408\u5206\u7247\u7684\u5206\u5e03\u60c5\u51b5\ndb.<collection>.getShardDistribution()\n\n#\u67e5\u770b\u6240\u6709\u5206\u7247\u4fe1\u606f\ndb.printShardingStatus()\n\n\n\n\n\n\n##\u624b\u52a8\u5206\u7247\n#\u8bbe\u7f6e\u5206\u7247\u6807\u7b7e\u540d\u79f0\nsh.addShardToZone("<shards._id>", "DC1")\nsh.addShardToZone("<shards._id>", "DC2")\n\n\n#\u6307\u5b9a\u7247\u952esid\u503c\u8303\u56f41-100\u5b58\u653e\u5728\u6807\u7b7e\u4e3aDC1\u7684\u5206\u7247\u4e2d\nsh.updateZoneKeyRange(\n   "tt.c1",\n   {sid: 1},\n   {sid: 100},\n   "DC1"\n)\n\n\n\n##\u624b\u52a8\u62c6\u5206chunk\n#\u5bf9\u6307\u5b9a\u4f4d\u7f6e\u8fdb\u884csplit\uff0c\u65b0\u7684chunk\u7684\u8fb9\u754c\u4ece\u6307\u5b9a\u7684\u7247\u952e\u503c\u5f00\u59cb\n#\u540e\u7eed\u7684\u5199\u5165\u4f1a\u6839\u636e\u7247\u952e\u6240\u5728\u7684\u8303\u56f4\u5199\u5165\u76f8\u8fd1\u7684chunk\n#\u6ce8\u610f\uff1a\u5df2\u6709\u6570\u636e\u60c5\u51b5\u4e0b\u4f1a\u62c6\u5206<\u6307\u5b9a\u7247\u952e\u503c\u7684\u6570\u636e\u5230\u65b0\u7684chunk\u91cc\u9762\uff0c\u539fchunk\u4fdd\u7559\u539f\u672c\u6240\u6709\u6570\u636e\nsh.splitAt("tt.c1", {sid: 70})\n\n#\u5728\u6709\u6307\u5b9a\u7247\u952e\u503c\u7684chunk\u521b\u5efa\u4e24\u4e2a\u5927\u81f4\u76f8\u7b49\u7684chunk\nsh.splitFind("tt.c1", {sid: 70})\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u6d4b\u8bd5\u6570\u636e",children:"\u6d4b\u8bd5\u6570\u636e"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'use testdb\n\nsh.enableSharding("testdb")\nsh.shardCollection("testdb.book", {id: "hashed"})\n\nvar cnt = 0;\nfor(var i=0; i<1000; i++){\n    var dl = [];\n    for(var j=0; j<100; j++){\n        dl.push({\n                "id" : "BBK-" + i + "-" + j,\n                "type" : "Revision",\n                "version" : "IricSoneVB0001",\n                "title" : "Jackson\'s Life",\n                "subCount" : 10,\n                "location" : "China CN Shenzhen Futian District",\n                "author" : {\n                      "name" : 50,\n                      "email" : "RichardFoo@yahoo.com",\n                      "gender" : "female"\n                },\n                "createTime" : new Date()\n            });\n      }\n      cnt += dl.length;\n      db.book.insertMany(dl);\n      print("insert ", cnt);\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u5747\u8861\u5668-blancer",children:"\u5747\u8861\u5668 blancer"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u5747\u8861\u5668\u4e3b\u8981\u6839\u636e\u96c6\u5408\u5728\u5404\u4e2ashard\u4e0achunk\u7684\u6570\u91cf\u6765\u51b3\u5b9a\u7684\uff0c\u76f8\u5dee\u8d85\u8fc7\u4e00\u5b9a\u9608\u503c\uff08\u548cchunk\u603b\u6570\u91cf\u76f8\u5173\uff09\u5c31\u4f1a\u89e6\u53d1chunk\u8fc1\u79fb\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'#\u81ea\u5b9a\u4e49\u5747\u8861\u5668\u5de5\u4f5c\u65f6\u95f4\n\nuse config\nsh.setBalancerState( true )\ndb.settings.update(\n    { _id : "balancer" }, \n    { $set : { activeWindow : { start : "3:00", stop : "5:00" } } }, \n    { upsert: true }\n)\n\n\n#\u67e5\u770b\u662f\u5426\u5f00\u542f\nsh.getBalancerState()\n\n#\u67e5\u770b\u5f53\u524d\u914d\u7f6e\nsh.getBalancerWindow()\nsh.status()\n\n\n#\u5f00\u542f\u5173\u95ed\nsh.stopBalancer()\nsh.startBalancer()\n\n#\u5173\u95ed\u5f00\u542f\u6307\u5b9a\u96c6\u5408\u4e0a\u7684\nsh.disableBalancing("tt.c1");\nsh.enableBalancing("tt.c1")\uff1b\n\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u5e38\u7528\u64cd\u4f5c",children:"\u5e38\u7528\u64cd\u4f5c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:'mongo  --shell --eval "db.serverStatus()"\n\n\n\n#mongo cli\u4e0b\u64cd\u4f5c\n#\u67e5\u770b\u5f15\u64ce\u914d\u7f6e\ndb.serverStatus().wiredTiger\n\n#\u67e5\u770b\u526f\u672c\u96c6\u96c6\u7fa4\u72b6\u6001\nrs.status()\n\n#\u67e5\u770b\u5206\u7247\u96c6\u7fa4\u72b6\u6001\nsh.status()\n\n#\u67e5\u770b\u6240\u6709\u5206\u7247\u4fe1\u606f\nuse admin\ndb.runCommand({ listshards : 1})\n\n#\u67e5\u770b\u5f00\u542f\u5206\u7247\u7684\u6570\u636e\u5e93\nuse config\ndb.databases.find()\n\n#\u67e5\u770b\u96c6\u7fa4\u914d\u7f6e\nrs.conf()\n\n#\u5f53\u524dop\ndb.currentOp()\n\n#\u5220\u9664\u8282\u70b9\nrs.remove("172.20.6.12:27017")\n\n#\u5173\u95ed\u8282\u70b9\nuse admin\ndb.shutdownServer()\n'})})]})}function m(n={}){const{wrapper:e}={...(0,t.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},7502:(n,e,o)=>{o.d(e,{Z:()=>d,a:()=>i});var s=o(50959);const t={},r=s.createContext(t);function i(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);